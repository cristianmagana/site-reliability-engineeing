# ubuntu-pod.yaml
apiVersion: v1
kind: Pod
metadata:
  name: ubuntu-internals
  namespace: default
spec:
  containers:
  - name: ubuntu
    image: ubuntu:22.04
    command: ["/bin/bash"]
    args: ["-c", "apt update && apt install -y procps net-tools strace ltrace tcpdump htop vim curl wget && sleep infinity"]
    securityContext:
      privileged: true
      capabilities:
        add: ["SYS_PTRACE", "NET_ADMIN", "SYS_ADMIN"]
    volumeMounts:
    - name: proc
      mountPath: /host/proc
      readOnly: true
    - name: sys
      mountPath: /host/sys
      readOnly: true
    - name: dev
      mountPath: /host/dev
      readOnly: true
    resources:
      requests:
        memory: "256Mi"
        cpu: "200m"
      limits:
        memory: "1Gi"
        cpu: "1"
  volumes:
  - name: proc
    hostPath:
      path: /proc
  - name: sys
    hostPath:
      path: /sys
  - name: dev
    hostPath:
      path: /dev
  restartPolicy: Never
  hostNetwork: true
  hostPID: true